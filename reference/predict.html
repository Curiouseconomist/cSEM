<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predict indicator scores — predict • cSEM</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Predict indicator scores — predict" />
<meta property="og:description" content="Predict the indicator scores of endogenous constructs." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-156347841-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-156347841-1');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cSEM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/cSEM.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Notation.html">Notation</a>
    </li>
    <li>
      <a href="../articles/Terminology.html">Terminology</a>
    </li>
    <li>
      <a href="../articles/Using-assess.html">Postestimation: Assessing a model</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/M-E-Rademaker/cSEM">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict indicator scores</h1>
    <small class="dont-index">Source: <a href='https://github.com/M-E-Rademaker/cSEM/blob/master/R/postestimate_predict.R'><code>R/postestimate_predict.R</code></a></small>
    <div class="hidden name"><code>predict.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Predict the indicator scores of endogenous constructs.</p>
    </div>

    <pre class="usage"><span class='fu'>predict</span>(
 <span class='kw'>.object</span>               <span class='kw'>=</span> <span class='kw'>NULL</span>,
 <span class='kw'>.benchmark</span>            <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"lm"</span>, <span class='st'>"unit"</span>, <span class='st'>"PLS-PM"</span>, <span class='st'>"GSCA"</span>, <span class='st'>"PCA"</span>, <span class='st'>"MAXVAR"</span>),
 <span class='kw'>.cv_folds</span>             <span class='kw'>=</span> <span class='fl'>10</span>,
 <span class='kw'>.handle_inadmissibles</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"stop"</span>, <span class='st'>"ignore"</span>, <span class='st'>"set_NA"</span>),
 <span class='kw'>.r</span>                    <span class='kw'>=</span> <span class='fl'>10</span>,
 <span class='kw'>.test_data</span>            <span class='kw'>=</span> <span class='kw'>NULL</span>
 )</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.object</th>
      <td><p>An R object of class <a href='csem_results.html'>cSEMResults</a> resulting from a call to <code><a href='csem.html'>csem()</a></code>.</p></td>
    </tr>
    <tr>
      <th>.benchmark</th>
      <td><p>Character string. The procedure to obtain benchmark predictions.
One of "<em>lm</em>", "<em>unit</em>", "<em>PLS-PM</em>", "<em>GSCA</em>", "<em>PCA</em>", or "<em>MAXVAR</em>".
Default to "<em>lm</em>".</p></td>
    </tr>
    <tr>
      <th>.cv_folds</th>
      <td><p>Integer. The number of cross-validation folds to use. Setting
<code>.cv_folds</code> to <code>N</code> (the number of observations) produces
leave-one-out cross-validation samples. Defaults to <code>10</code>.</p></td>
    </tr>
    <tr>
      <th>.handle_inadmissibles</th>
      <td><p>Character string. How should inadmissible results
be treated? One of "<em>stop</em>", "<em>ignore</em>", or "<em>set_NA</em>". If "<em>stop</em>", <code>predict()</code>
will stop immediatly if estimation yields an inadmissible result.
For "<em>ignore</em>" all results are returned even if all or some of the estimates
yielded inadmissible results.
For "<em>set_NA</em>" predictions based on inadmissible parameter estimates are
set to <code>NA</code>. Defaults to "<em>stop</em>"</p></td>
    </tr>
    <tr>
      <th>.r</th>
      <td><p>Integer. The number of repetitions to use. Defaults to <code>10</code>.</p></td>
    </tr>
    <tr>
      <th>.test_data</th>
      <td><p>A matrix of test data with the same column names as the
training data.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>cSEMPredict</code> with print and plot methods.
Technically, <code>cSEMPredict</code> is a
named list containing the following list elements:</p>
<dl class='dl-horizontal'>
<dt><code>$Actual</code></dt><dd><p>A matrix of the actual values/indicator scores of the endogenous constructs.</p></dd>
<dt><code>$Prediction_target</code></dt><dd><p>A matrix of the predicted indicator scores of the endogenous constructs
based on the target model. Target refers to procedure used to estimate
the parameters in <code>.object</code>.</p></dd>
<dt><code>$Residuals_target</code></dt><dd><p>A matrix of the residual indicator scores of the endogenous constructs
based on the target model.</p></dd>
<dt><code>$Residuals_benchmark</code></dt><dd><p>A matrix of the residual indicator scores
of the endogenous constructs based on a model estimated by the procedure
given to <code>.benchmark</code>.</p></dd>
<dt><code>$Prediction_metrics</code></dt><dd><p>A data frame containing the predictions metrics
MAE, RMSE, and Q2_predict.</p></dd>
<dt><code>$Information</code></dt><dd><p>A list with elements
<code>Target</code>, <code>Benchmark</code>,
<code>Number_of_observations_training</code>, <code>Number_of_observations_test</code>, <code>Number_of_folds</code>,
<code>Number_of_repetitions</code>, and <code>Handle_inadmissibles</code>.</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Predict uses the procedure introduced by Shmueli et al. (2016)
 in the context of
PLS (commonly called: "PLSPredict" (Shmueli et al. 2019)
).
Predict uses k-fold cross-validation to randomly
split the data into training and test data and subsequently predicts the
relevant values in the test data based on the model parameter estimates obtained
using the training data. The number of cross-validation folds is 10 by default but
may be changed using the <code>.cv_folds</code> argument.
By default, the procedure is repeated <code>.r = 10</code> times to avoid irregularities
due to a particular split. See Shmueli et al. (2019)
 for
details.</p>
<p>Alternatively, users may supply a matrix of <code>.test_data</code> with the same column names
as those in the data used to obtain <code>.object</code> (the training data).
In this case, arguments <code>.cv_folds</code> and <code>.r</code> are
ignored and predict uses the estimated coefficients from <code>.object</code> to
predict the values in the columns of <code>.test_data</code>.</p>
<p>In Shmueli et al. (2016)
 PLS-based predictions for indicator <code>i</code>
are compared to the predictions based on a multiple regression of indicator <code>i</code>
on all available exogenous indicators (<code>.benchmark = "lm"</code>) and
a simple mean-based prediction summarized in the Q2_predict metric.
<code>predict()</code> is more general in that is allows users to compare the predictions
based on a so-called target model/specificiation to predictions based on an
alternative benchmark. Available benchmarks include predictions
based on a linear model, PLS-PM weights, unit weights (i.e. sum scores),
GSCA weights, PCA weights, and MAXVAR weights.</p>
<p>Each estimation run is checked for admissibility using <code><a href='verify.html'>verify()</a></code>. If the
estimation yields inadmissible results, <code>predict()</code> stops with an error (<code>"stop"</code>).
Users may choose to <code>"ignore"</code> inadmissible results or to simply set predictions
to <code>NA</code> (<code>"set_NA"</code>) for the particular run that failed.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Shmueli G, Ray S, Estrada JMV, Chatla SB (2016).
&#8220;The Elephant in the Room: Predictive Performance of PLS Models.&#8221;
<em>Journal of Business Research</em>, <b>69</b>(10), 4552--4564.
doi: <a href='https://doi.org/10.1016/j.jbusres.2016.03.049'>10.1016/j.jbusres.2016.03.049</a>
.<br /><br /> Shmueli G, Sarstedt M, Hair JF, Cheah J, Ting H, Vaithilingam S, Ringle CM (2019).
&#8220;Predictive Model Assessment in PLS-SEM: Guidelines for Using PLSpredict.&#8221;
<em>European Journal of Marketing</em>, <b>53</b>(11), 2322--2347.
doi: <a href='https://doi.org/10.1108/ejm-02-2019-0189'>10.1108/ejm-02-2019-0189</a>
.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='csem.html'>csem</a>, <a href='csem_results.html'>cSEMResults</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### Anime example taken from https://github.com/ISS-Analytics/pls-predict</span>

<span class='co'># Load data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>Anime</span>) <span class='co'># data is similar to the Anime.csv found on </span>
            <span class='co'># https://github.com/ISS-Analytics/pls-predict but with irrelevant</span>
            <span class='co'># columns removed</span>

<span class='co'># Split into training and data the same way as it is done on </span>
<span class='co'># https://github.com/ISS-Analytics/pls-predict</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>123</span>)

<span class='no'>index</span>     <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample.int</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span>(<span class='no'>Anime</span>)[<span class='fl'>1</span>], <span class='fl'>83</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>dat_train</span> <span class='kw'>&lt;-</span> <span class='no'>Anime</span>[-<span class='no'>index</span>, ]
<span class='no'>dat_test</span>  <span class='kw'>&lt;-</span> <span class='no'>Anime</span>[<span class='no'>index</span>, ]

<span class='co'># Specify model</span>
<span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='st'>"
# Structural model

ApproachAvoidance ~ PerceivedVisualComplexity + Arousal

# Measurement/composite model

ApproachAvoidance         =~ AA0 + AA1 + AA2 + AA3
PerceivedVisualComplexity &lt;~ VX0 + VX1 + VX2 + VX3 + VX4
Arousal                   &lt;~ Aro1 + Aro2 + Aro3 + Aro4
"</span>

<span class='co'># Estimate (replicating the results of the `simplePLS()` function)</span>
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='csem.html'>csem</a></span>(<span class='no'>dat_train</span>,
            <span class='no'>model</span>,
            <span class='kw'>.disattenuate</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='co'># original PLS</span>
            <span class='kw'>.iter_max</span> <span class='kw'>=</span> <span class='fl'>300</span>,
            <span class='kw'>.tolerance</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
            <span class='kw'>.PLS_weight_scheme_inner</span> <span class='kw'>=</span> <span class='st'>"factorial"</span>
)

<span class='co'># Predict using a user-supplied training data set</span>
<span class='no'>pp</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>res</span>, <span class='kw'>.test_data</span> <span class='kw'>=</span> <span class='no'>dat_test</span>)
<span class='no'>pp</span>$<span class='no'>Predictions_target</span>[<span class='fl'>1</span>:<span class='fl'>6</span>, ]</div><div class='output co'>#&gt;          AA0      AA1      AA2      AA3
#&gt; 4  1.6668304 2.101690 2.252157 2.538023
#&gt; 6  6.3109205 6.453202 6.577008 6.542260
#&gt; 7  4.3329867 4.599878 4.735039 4.836842
#&gt; 12 3.6066459 3.919297 4.058628 4.210575
#&gt; 13 5.8594078 6.030135 6.156533 6.152956
#&gt; 14 0.9136649 1.395974 1.550764 1.888627</div><div class='input'><span class='no'>pp</span></div><div class='output co'>#&gt; ________________________________________________________________________________
#&gt; ----------------------------------- Overview -----------------------------------
#&gt; 
#&gt; 	Number of obs. training          = 100
#&gt; 	Number of obs. test              = 83
#&gt; 	Number of cv folds               = NA
#&gt; 	Number of repetitions            = 1
#&gt; 	Handle inadmissibles             = stop
#&gt; 	Target                           = 'PLS-PM'
#&gt; 	Benchmark                        = 'lm'
#&gt; 
#&gt; ------------------------------ Prediction metrics ------------------------------
#&gt; 
#&gt; 
#&gt;   Name    MAE target  MAE benchmark  RMSE target RMSE benchmark   Q2_predict
#&gt;   AA0         1.2027         1.1671       1.5472         1.5010       0.4625
#&gt;   AA1         1.5028         1.5532       1.8751         1.9659       0.2794
#&gt;   AA2         0.9892         0.9821       1.3950         1.4021       0.4396
#&gt;   AA3         1.0416         1.0489       1.4282         1.4743       0.3656
#&gt; ________________________________________________________________________________</div><div class='input'>
<span class='co'>### Compute prediction metrics  ------------------------------------------------</span>
<span class='no'>res2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='csem.html'>csem</a></span>(<span class='no'>Anime</span>, <span class='co'># whole data set</span>
            <span class='no'>model</span>,
            <span class='kw'>.disattenuate</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='co'># original PLS</span>
            <span class='kw'>.iter_max</span> <span class='kw'>=</span> <span class='fl'>300</span>,
            <span class='kw'>.tolerance</span> <span class='kw'>=</span> <span class='fl'>1e-07</span>,
            <span class='kw'>.PLS_weight_scheme_inner</span> <span class='kw'>=</span> <span class='st'>"factorial"</span>
)

<span class='co'># Predict using 10-fold cross-validation with 5 repetitions</span>
<span class='no'>pp2</span> <span class='kw'>&lt;-</span> <span class='fu'>predict</span>(<span class='no'>res</span>, <span class='kw'>.benchmark</span> <span class='kw'>=</span> <span class='st'>"lm"</span>)
<span class='no'>pp2</span></div><div class='output co'>#&gt; ________________________________________________________________________________
#&gt; ----------------------------------- Overview -----------------------------------
#&gt; 
#&gt; 	Number of obs. training          = 90
#&gt; 	Number of obs. test              = 10
#&gt; 	Number of cv folds               = 10
#&gt; 	Number of repetitions            = 10
#&gt; 	Handle inadmissibles             = stop
#&gt; 	Target                           = 'PLS-PM'
#&gt; 	Benchmark                        = 'lm'
#&gt; 
#&gt; ------------------------------ Prediction metrics ------------------------------
#&gt; 
#&gt; 
#&gt;   Name    MAE target  MAE benchmark  RMSE target RMSE benchmark   Q2_predict
#&gt;   AA0         1.1566         1.1735       1.5007         1.5561       0.4571
#&gt;   AA1         1.4230         1.4976       1.8275         1.9620       0.2953
#&gt;   AA2         0.9494         0.9191       1.1893         1.1893       0.5895
#&gt;   AA3         0.9876         1.0403       1.3067         1.3849       0.4771
#&gt; ________________________________________________________________________________</div><div class='input'><span class='co'>## There is a plot method available</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>pp2</span>)</div><div class='output co'>#&gt; ________________________________________________________________________________
#&gt; 	Enter the number of the plot you want to show:
#&gt; 
#&gt; 		1 - Actual values vs. predicted values
#&gt; 		2 - Estimated density function - residuals
#&gt; 		3 - Estimated density function - predicted values
#&gt; ________________________________________________________________________________Your choice:</div><div class='output co'>#&gt; <span class='error'>Error: `` is not a valid choice.</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Manuel E. Rademaker, Florian Schuberth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


